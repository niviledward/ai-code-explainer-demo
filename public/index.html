<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>AI Code Explainer & Refactoring Assistant</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body class="beginner">
    <!-- TOP BAR -->
    <header class="topbar">
        <div class="brand">
            <h1>AI Code Explainer & Refactoring Assistant</h1>
            <p class="tagline">Understand • Refactor • Review</p>
        </div>

        <div class="controls">
            <label class="control-block">
                <span class="label-small">Mode</span>
                <select id="modeSelect">
                    <option value="beginner">Beginner - Teach me slowly</option>
                    <option value="pro">Pro - Keep it concise</option>
                    <option value="reviewer">Reviewer - Be strict</option>
                </select>
            </label>

            <label class="control-block">
                <span class="label-small">Language</span>
                <select id="langSelect">
                    <option value="python">Python</option>
                    <option value="javascript">JavaScript</option>
                    <option value="java">Java</option>
                </select>
            </label>

            <button id="exportBtn" class="btn-outline">Export Report</button>
        </div>
    </header>

    <!-- MAIN LAYOUT -->
    <main class="layout">
        <!-- LEFT PANEL: INPUT -->
        <section class="panel panel-left">
            <div class="panel-head">
                <div class="title-row">
                    <h2>Your Code</h2>
                    <span class="chip">Max 200 lines</span>
                </div>
                <p class="hint">Paste your function or snippet below</p>
            </div>

            <textarea id="codeInput" class="code-area" spellcheck="false">
def find_max(nums):
    max_num = 0
    for i in range(len(nums)):
        if nums[i] > max_num:
            max_num = nums[i]
    print("The maximum number is:", max_num)

find_max([3, 1, 4, 1, 5, 9, 2])
      </textarea>

            <label class="question-block">
                <div class="label-row">
                    <span class="label">Optional question to AI</span>
                    <span class="sub">Leave blank if you just want an explanation</span>
                </div>
                <input id="questionInput" class="question-input"
                    placeholder="Explain this step-by-step and tell me if it's safe and efficient." />
            </label>

            <div class="actions-row">
                <button id="analyzeBtn" class="btn-primary">Analyze Code</button>
                <button id="refactorBtn" class="btn-ghost">Refactor Code</button>
                <button id="testsBtn" class="btn-ghost">Generate Tests</button>
                <button id="clearBtn" class="btn-outline small">Clear</button>
            </div>

            <div class="mode-indicator">
                <div>Current mode: <span id="currentModeText">Beginner</span></div>
                <div class="mode-desc" id="currentModeDesc">
                    Explanations will be slow, friendly and include inputs/outputs.
                </div>
            </div>
        </section>

        <!-- RIGHT PANEL: OUTPUT -->
        <section class="panel panel-right">
            <!-- TAB HEADERS -->
            <div class="tabs-header">
                <button class="tab-btn active" data-tab="tab-explain" id="tabExplainBtn">Explanation</button>
                <button class="tab-btn" data-tab="tab-refactor" id="tabRefactorBtn">Refactored Code</button>
                <button class="tab-btn" data-tab="tab-tests" id="tabTestsBtn">Unit Tests</button>
            </div>

            <!-- LOADING STATE -->
            <div id="loading" class="loading hidden">Thinking...</div>

            <!-- TAB: EXPLANATION -->
            <div class="tab-panel" id="tab-explain">
                <div class="response-sections" id="explainSection">
                    <!-- Summary -->
                    <div class="resp-card">
                        <div class="resp-title">Summary</div>
                        <pre id="respSummary" class="resp-body"></pre>
                    </div>

                    <!-- Inputs / Outputs (Beginner only, hidden for others) -->
                    <div class="resp-card" id="inputsOutputsSection">
                        <div class="resp-title">Inputs / Outputs</div>
                        <pre id="respInputsOutputs" class="resp-body"></pre>
                    </div>

                    <!-- Steps -->
                    <div class="resp-card">
                        <div class="resp-title">Step-by-step Explanation</div>
                        <pre id="respSteps" class="resp-body"></pre>
                    </div>

                    <!-- Complexity -->
                    <div class="resp-card">
                        <div class="resp-title">Time / Space Complexity</div>
                        <pre id="respComplexity" class="resp-body"></pre>
                    </div>

                    <!-- Improvements -->
                    <div class="resp-card">
                        <div class="resp-title">Suggested Improvements</div>
                        <pre id="respImprovements" class="resp-body"></pre>
                    </div>

                    <!-- Caution -->
                    <div class="resp-card">
                        <div class="resp-title">Caution / Edge Cases</div>
                        <pre id="respCaution" class="resp-body"></pre>
                    </div>
                </div>

                <div class="generated-note">
                    Generated by local AI (phi via Ollama). This is assistance, not final review.
                </div>
            </div>

            <!-- TAB: REFACTORED CODE -->
            <div class="tab-panel hidden" id="tab-refactor">
                <div class="resp-card">
                    <div class="resp-title-row">
                        <div class="resp-title">Refactored Code</div>
                        <button id="copyRefactorBtn" class="btn-outline small">Copy</button>
                    </div>
                    <textarea id="refactorOutputBox" class="code-area light-editor" readonly
                        spellcheck="false"></textarea>
                </div>

                <div class="resp-card">
                    <div class="resp-title">Why this refactor is better</div>
                    <pre id="refactorWhy" class="resp-body"></pre>
                </div>

                <div class="generated-note">
                    Refactoring tries to keep same behaviour but improve clarity and safety.
                </div>
            </div>

            <!-- TAB: TESTS -->
            <div class="tab-panel hidden" id="tab-tests">
                <div class="resp-card">
                    <div class="resp-title">Generated Unit Tests</div>
                    <textarea id="testOutputBox" class="code-area light-editor" readonly spellcheck="false"></textarea>
                </div>

                <div class="resp-card">
                    <div class="resp-title">Test Coverage Notes</div>
                    <pre id="testNotes" class="resp-body"></pre>
                </div>

                <div class="generated-note">
                    These tests are suggestions. Review before using in production.
                </div>
            </div>
        </section>
    </main>

    <!-- FOOTER -->
    <footer class="footer">
        This tool is designed to support developers, not replace them. You still own your code and review.
    </footer>

    <script src="main.js"></script>
</body>

</html>